<style type="text/css">
                                div.main {
                                    margin: 0;
                                    padding: 0;
                                }
                                div.main2 {
                                    height: 100%;
                                    font-size: 62.5%
                                }
                                div.main3 {
                                    height: 100%;
                                    background-color: #FFFFFF;
                                    font: 1.2em Verdana, Arial, Helvetica, sans-serif;
                                }
                                form {
                                    margin: 25px 0 0 29px;                                    
                                    padding-bottom: 30px;
                                }
                                fieldset {
                                    margin: 0 0 22px 0;
                                    border: 1px solid #A33200;
                                    padding: 12px 17px;
                                    background-color: #FFE1D3;
                                }
                                legend {
                                    font-size: 1.2em;
                                    background-color: #A33200;
                                    color: #FFFFFF;
                                    font-weight: bold;
                                    padding: 4px 8px;
                                }
                                label.float {
                                    font-size: 0.9em;
                                    float: left;
                                    width: 250px;
                                    margin: 4px 0 0 0;
                                    clear: left;
                                }
                                label {
                                    display: block;
                                    width: auto;
                                    margin: 0 0 10px 0;
                                }
                                label.spam-protection {
                                    display: inline;
                                    width: auto;
                                    margin: 0;
                                }
                                
                                input.inp-error{
                                    border: 4px solid #A41600;
                                    padding: 3px;
                                    width: 100px;
                                    margin: 0 0 8px 0;
                                }
    
                                input.inp-text{
                                    border: 1px solid #909090;
                                    padding: 3px;
                                    width: 100px;
                                    margin: 0 0 8px 0;
                                }
                                
                                input.submit-button {
                                    font: 0.95em Georgia, "Times New Roman", Times, serif;
                                    letter-spacing: 2px;
                                    float:left;                                    
                                    margin: 5px 0 0 0;
                                    background-color: #A33200;
                                }
                                input.submit-reset {
                                    font: 0.95em Georgia, "Times New Roman", Times, serif;
                                    letter-spacing: 2px;
                                    float:left;                                    
                                    margin: 0 2px 0 0;
                                    background-color: #696969;
                                }
                                div.error-box{
                                    font: 1.0em Georgia, "Times New Roman", Times, serif;
                                    border: 1px solid #909090;
                                    height: 300px;
                                    width: 200px;
                                    float : right;
                                    background-color: #FF9999;
                                    margin: 5px;
                                    padding: 5px;
                                }
                                div.help-box{
                                    font: 1.0em Georgia, "Times New Roman", Times, serif;
                                    border: 1px solid #909090;
                                    height: 300px;
                                    width: 200px;
                                    float : right;
                                    background-color: #FFFFCC;
                                    margin: 5px;
                                    padding: 5px;
                                }
                                form br {
                                    display: none;
                                }
/* For help tip */
a.tooltip {outline:none; font-size: 12px;}
a.tooltip strong {font-size:14px;}
a.tooltip:hover {text-decoration:none;} 
a.tooltip span {
    z-index:10;display:none; padding:14px 20px;
    margin-top:20px; margin-left:20px;
    width:auto; line-height:16px;
    height:auto;
}
a.tooltip:hover span{
    display:inline; position:absolute; 
    border:2px solid #FFF;  color:#EEE;
    background:#333 url(cssttp/css-tooltip-gradient-bg.png) repeat-x 0 0;
    font-size: 14px;
}
.callout {z-index:20;position:absolute;border:0;top:-14px;left:120px;}
    
/*CSS3 extras*/
a.tooltip span
{
    border-radius:2px;        
    box-shadow: 0px 0px 8px 4px #666;
    /*opacity: 0.8;*/
}   
</style>
<div class="main">
<div class="main2">
<div class="main3">
<form name="dcfform" action="" method="post">
<fieldset>
<legend>DCF Calculator :</legend>
<p>
                                                    <label for="fcf" class="float"><strong>Initial Cash flow :</strong><br />
                                                    </label><br />
                                                    <input class="inp-text" name="fcf-name" id="fcf" type="text" size="10"/>   
<a href="#" class="tooltip">
    help !
    <span>        
        <strong>Normalize. </strong><br />
It's better to take a 3-5 years average FCF as this starting number instead of the latest year's FCF. This is for the simple reason that the latest year can be a best/worst number. FCF can be calculated from the Cash Flow Statement in the annual report. FCF formula = Net Cash from/(used in) Operating Activities minus Purchase of Fixed Assets
</span>
</a>                                                            

                                                </p>
   <div id="messageBox"></div>    
<p>
                                                    <label for="gr1" class="float"><strong>Growth Rate (1-5 Years) :</strong><br />
                                                    </label><br />
                                                    <input class="inp-text" name="gr1-name" id="gr1" type="text" size="10" />
<a href="#" class="tooltip">
    help !
    <span>        
        <strong>Be conservative! </strong><br /> In a 2-stage DCF, we break the next 10 years into two phases of five years each, and then calculate the FCF growth based on growth rates assumed for each period. Prefer to value stocks based on the present data rather than what will happen in the future. Anything could happen even in 1 year, and if the growth rate is too high and the company cannot meet those expectations, there is no where to go but down. The best practice is to keep growth rates as low as possible. If the company looks to be undervalued with 0% growth rate, you have more upside than downside. The higher you set the growth rate, the higher you set up the downside potential. Just be reasonable and use common sense. On most of the stocks I value, I rarely go above 15% (for the first 5-year period), and that’s only for the safest, cash-generating businesses like Colgate, HUL, Infosys etc. This is approx. 2x India's expected long-term GDP growth rate. The goal of choosing a growth rate is to find a number which is conservative yet not very low or pessimistic, and close to reality in order to capture potential future gains without eliminating too many investment candidates.
</span>
</a>                                                            

                                                </p>
<p>
                                                    <label for="gr2" class="float"><strong>Growth Rate (6-10 Years) :</strong><br />
                                                    </label><br />
                                                    <input class="inp-text" name="gr2-name" id="gr2" type="text" size="10" />
                                                </p>
<p>
                                                    <label for="dr" class="float"><strong>Discount Rate :</strong><br />
                                                    </label><br />
                                                    <input class="inp-text" name="dr-name" id="dr" type="text" size="10" />
<a href="#" class="tooltip">
    help !
    <span>        
        <strong>This is the rate at which you discount the future cash flows to the present value. </strong><br/> So what would be a good rate? Considering that the “average” market return is about 10-15%, a minimum discount rate should be set to 10%. I use 10% as a minimum for stable and predictable companies such as Colgate, Infosys, HUL while 15% is a good return for less predictable companies such as, say Opto Circuits. Also, do not adjust the entire risk of a investment in its discount rate. In other words, if Opto Circuits is a "riskier" investment that say Titan, adjust for some risk in the cash flow growth estimates and some in the discount rate. Ignore simple yet junk models like CAPM to get the discount rate. People in the finance world pour out their hearts to obtain the most accurate discount rate by analyzing risk free rates, beta, risk premium and WACC. It's just short of rubbish! What’s the point in learning every method of hammering a nail when all you have to do is hit it on the head. So do not over-complicate this aspect. The beauty of old school Graham and Buffett is that their investments are based on common sense, not volatility and other mumbo jumbo. There is no hard and fast rule for choosing a discount rate. Using a high discount rate to discount the future cash just means you are willing to pay less today for the future cash and vice versa.Do understand that - “You can’t compensate for risk by using a high discount rate.”  The important aspect is not deciding upon a discount rate, but in being logical and reasonable about cash projections. Another way you can look at discount rate is to not using different discount rates for different businesses. It won't really matter what rate you use as long as you are being intellectually honest and conservative about future cash flows.
</span>
</a>                                                            

                                                </p>
<p>
                                                    <label for="tgr" class="float"><strong>Terminal Growth Rate :</strong><br />
                                                    </label><br />
                                                    <input class="inp-text" name="tgr-name" id="tgr" type="text" size="10" />
<a href="#" class="tooltip">
    help !
    <span>        
        <strong>Guideline to choose Terminal Growth Rate : </strong><br />Since it isn’t practical to forecast cash flows for an infinite number of years, it’s usual to end the DCF with a terminal value. The best terminal growth rate is 0%, and the highest you should go (for safest businesses) is 2%.
</span>
</a>    
</p>
<p>
                                                    <label for="so" class="float"><strong>Shares Outstanding :</strong><br />
                                                    </label><br />
                                                    <input class="inp-text" name="so-name" id="so" type="text" size="10" />

</p>
<p>
                                                    <label for="debt" class="float"><strong>Net Debt :</strong><br />
                                                    </label><br />
                                                    <input class="inp-text" name="debt-name" id="debt" type="text" size="10" />
<a href="#" class="tooltip">
    help !
    <span>        
        <strong>Enter a negative value for cash positive companies.</strong><br />
If this figure is negative, it means that the company has more Cash than Debt. 
</span>
</a>    

</p>
<p>
                                                    <label for="dcfval" class="float"><strong>DCF Value per share = </strong><br />
                                                    </label><br />
                                                    <input class="inp-text" name="dcfval-name" id="dcfval" readonly="true" type="text" size="10" /></p>
<p>                                                <input class="submit-reset" type="button" alt="Reset" name="Reset" value="Reset" onClick="resetdcf()"/><br />
                                                <input class="submit-button" type="button" alt="SUBMIT" name="Submit" value="Calculate" onClick="calculatedcf()"/><br />
                                            </fieldset>
</p>
</form>
</div>
</div>
</div>

<script type='text/javascript'>
    function resetdcf() {
        try {
            document.getElementById('messageBox').innerHTML = '';
            document.getElementsByName('dcfform')[0].reset();
        } catch (e) {
            alert('error 3 : ' + e);
        }
    }

    function calculatedcf() {
        
        document.getElementById('messageBox').innerHTML = '';
        
        var flag = true;
        var errorString = '';
        var fcfRegex = /^[0-9]+$/;  
        var grRegex = /^[0-9]+$/;  
        var sharesRegex = /^[0-9]+$/;  
        var debtRegex = /^-?[0-9]+$/;          
        
        errorString = 'Please enter a Valid value for : <br/>';
        
        if(!document.getElementById('fcf').value.match(fcfRegex)) {              
            errorString += ' FCF <br/>';
            flag = false;
        }
        
        if(!document.getElementById('gr1').value.match(grRegex)) {              
            errorString += 'Growth rate (1-5 year) <br/>';
            flag = false;
        }
        
        if(!document.getElementById('gr2').value.match(grRegex)) {              
            errorString += 'Growth rate (6-10 year) <br/>';
            flag = false;
        }
        
        if(!document.getElementById('tgr').value.match(grRegex)) {              
            errorString += 'Terminal Growth Rate <br/>';
            flag = false;
        }
        
        if(!document.getElementById('dr').value.match(grRegex)) {              
            errorString += 'Discount Rate <br/>';
            flag = false;
        }
        
        if(!document.getElementById('so').value.match(sharesRegex)) {              
            errorString += 'Outstanding shares <br/>';
            flag = false;
        }
        
        if(!document.getElementById('debt').value.match(debtRegex)) {              
            errorString += 'Net Debt <br/>';
            flag = false;
        }
        
        if(!flag){
            //alert(errorString);
            document.getElementById('messageBox').innerHTML = '<div class="error-box">'+errorString+'</div>';
            return;
        }
        
        var fcf = document.getElementById('fcf').value;
        var growthRate1 = document.getElementById('gr1').value;
        var growthRate2 = document.getElementById('gr2').value;
        var discRate = document.getElementById('dr').value;
        var termGrowthRate = document.getElementById('tgr').value;
        var shares = document.getElementById('so').value;
        var debt = document.getElementById('debt').value;

        var fcf1 = (fcf * (1 + growthRate1 / 100)).toFixed(0);
        var fcf2 = (fcf1 * (1 + growthRate1 / 100)).toFixed(0);
        var fcf3 = (fcf2 * (1 + growthRate1 / 100)).toFixed(0);
        var fcf4 = (fcf3 * (1 + growthRate1 / 100)).toFixed(0);
        var fcf5 = (fcf4 * (1 + growthRate1 / 100)).toFixed(0);

        var fcf6 = (fcf5 * (1 + growthRate2 / 100)).toFixed(0);
        var fcf7 = (fcf6 * (1 + growthRate2 / 100)).toFixed(0);
        var fcf8 = (fcf7 * (1 + growthRate2 / 100)).toFixed(0);
        var fcf9 = (fcf8 * (1 + growthRate2 / 100)).toFixed(0);
        var fcf10 = (fcf9 * (1 + growthRate2 / 100)).toFixed(0);

        var pv1 = (fcf1 / (1 + discRate / 100)).toFixed(0);
        var pv2 = (fcf2 / Math.pow((1 + discRate / 100), 2)).toFixed(0);
        var pv3 = (fcf3 / Math.pow((1 + discRate / 100), 3)).toFixed(0);
        var pv4 = (fcf4 / Math.pow((1 + discRate / 100), 4)).toFixed(0);
        var pv5 = (fcf5 / Math.pow((1 + discRate / 100), 5)).toFixed(0);
        var pv6 = (fcf6 / Math.pow((1 + discRate / 100), 6)).toFixed(0);
        var pv7 = (fcf7 / Math.pow((1 + discRate / 100), 7)).toFixed(0);
        var pv8 = (fcf8 / Math.pow((1 + discRate / 100), 8)).toFixed(0);
        var pv9 = (fcf9 / Math.pow((1 + discRate / 100), 9)).toFixed(0);
        var pv10 = (fcf10 / Math.pow((1 + discRate / 100), 10)).toFixed(0);

        var tyval = parseInt(fcf10 * (1 + termGrowthRate / 100));
        var totalPV = parseInt(pv1) + parseInt(pv2) + parseInt(pv3) + parseInt(pv4) + parseInt(pv5) + parseInt(pv6) + parseInt(pv7) + parseInt(pv8) + parseInt(pv9) + parseInt(pv10);
        var totalTV = ((parseInt(tyval) / ((discRate - termGrowthRate) / 100)) / Math.pow((1 + discRate / 100), 10)).toFixed(0);
        var totalVal = parseInt(totalPV) + parseInt(totalTV);
        var dcfval = parseInt((parseInt(totalVal) - debt) / (shares));

        document.getElementById('dcfval').value = dcfval;
    }
</script>